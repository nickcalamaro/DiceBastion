name = "dicebastion-memberships"
main = "worker/src/index.js"
compatibility_date = "2024-10-23"
compatibility_flags = ["nodejs_compat"]

# Change this to your real route once ready, e.g. your domain
# routes = [ { pattern = "yourdomain.com/api/*", zone_name = "yourdomain.com" } ]
# For local dev it will run at http://127.0.0.1:8787

[vars]
ALLOWED_ORIGIN = "https://dicebastion.com"
RETURN_URL = "https://dicebastion.com/thank-you"
CURRENCY = "GBP"
SUMUP_REGION = "UK"
SUMUP_MERCHANT_CODE = "MUZHYEAH"
TURNSTILE_SITE_KEY = "0x4AAAAAACAB4xlOnW3S8K0k"
TURNSTILE_SECRET = "0x4AAAAAACAB41xceooY522cbKNKGVTP-iA"
MAILERSEND_FROM_NAME = "Dice Bastion"
MAILERSEND_FROM_EMAIL = "noreply@dicebastion.com"
# Note: MAILERSEND_API_KEY must be set as a secret using: wrangler secret put MAILERSEND_API_KEY
# The URL to redirect back to after SumUp checkout completes (success/cancel)

[[d1_databases]]
binding = "DB"
database_name = "dicebastion-d1"
# Use your real database UUID
database_id = "9abc9bae-236a-4237-aa88-78cf161ba9d1"

[observability]
[observability.logs]
enabled = false
head_sampling_rate = 1
invocation_logs = true
persist = true

# Cron trigger for membership renewals (runs daily at 2 AM UTC)
[triggers]
crons = ["0 2 * * *"]